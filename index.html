<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>UpdateMyGear.com Checkout</title>
  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  
</head>

<style>
  #checkoutError {
      width: 100%;
      padding: 50px 0;
      text-align: center;
      background-color: red;
      margin-top: 20px;
      display:none;
  }
  </style>

<body>

  <h1>UpdateMyGear.com Checkout</h1>

<div class="shopping-cart">

  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>

  <div class="product">
    <div class="product-image">
      <img src="https://www.att.com/catalog/en/skus/images/apple-iphone%20x-space%20gray-450x350.png">
    </div>
    <div class="product-details">
      <div class="product-title">iPhone X</div>
      <p class="product-description">Our vision has always been to create an iPhone that is entirely screen. One so immersive the device itself disappears into the experience. And so intelligent it can respond to a tap, your voice, and even a glance. With iPhone X, that vision is now a reality. Say hello to the future.</p>
    </div>
    <div class="product-price">800.00</div>
    <div class="product-quantity">
      <input type="number" value="2" min="1">
    </div>
    <div class="product-removal">
      <button class="remove-product">
        Remove
      </button>
    </div>
    <div class="product-line-price">1600.00</div>
  </div>

  <div class="product">
    <div class="product-image">
      <img src="https://store.storeimages.cdn-apple.com/4662/as-images.apple.com/is/image/AppleInc/aos/published/images/M/ME/MMEF2/MMEF2?wid=572&hei=572&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=1503962928226">
    </div>
    <div class="product-details">
      <div class="product-title">Apple AirPods</div>
      <p class="product-description">AirPods will forever change the way you use headphones. Whenever you pull your AirPods out of the charging case, they instantly turn on and connect to your iPhone, Apple Watch, iPad or Mac.(1) Audio automatically plays as soon as you put them in your ears and pauses when you take them out.</p>
    </div>
    <div class="product-price">129.00</div>
    <div class="product-quantity">
      <input type="number" value="1" min="1">
    </div>
    <div class="product-removal">
      <button class="remove-product">
        Remove
      </button>
    </div>
    <div class="product-line-price">129.00</div>
  </div>

  <div class="totals">
    <div class="totals-item">
      <label>Subtotal</label>
      <div class="totals-value" id="cart-subtotal">71.97</div>
    </div>
    <div class="totals-item">
      <label>VAT (5%)</label>
      <div class="totals-value" id="cart-tax">3.60</div>
    </div>
    <div class="totals-item">
      <label>Shipping</label>
      <div class="totals-value" id="cart-shipping">15.00</div>
    </div>
    <div class="totals-item totals-item-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total">90.57</div>
    </div>
  </div>
      
      <button class="checkout" onclick="completeCheckout()">Checkout</button>
  </div>


<div id="checkoutError">
  Error in Checkout - "Object Reference Not Set", Please try later
</div>

<script>
  function completeCheckout() {

      var x = document.getElementById("checkoutError");
      if (x.style.display == "none") {
          x.style.display = "block";
      } else {
          x.style.display = "none";
      }

    // Requires jQuery
    var eventObject = '{ ' + 
        ' "client_url": "https://rpm.newrelic.com/accounts/1218847/incidents/17615637", ' +
        ' "service_key"\: "f12ef11d856640348ee5ec412a1ad087", ' +
        ' "incident_key"\: "/Alert/1218847/17615637/13317445", ' +
        ' "client"\: "NewRelic", ' +
        ' "vendor"\: "NewRelic", ' +
        ' "event_type"\: "trigger", ' +
        ' "contexts"\: [ ' +
        ' {  ' +
            ' "src": "https://s18.postimg.org/h2zqertrd/NRScreen.png", ' +
            ' "alt": "Snapshot of metric", ' +
            ' "href": "https://s18.postimg.org/h2zqertrd/NRScreen.png", ' +
            ' "type": "image" ' +
        ' }, ' +
    
        ' { ' +   
        ' "text": "Conference URL (Zoom)", ' +
        ' "href": "https://pagerduty.zoom.us/j/5080555253", ' +
        ' "type": "link" ' +
        ' }, ' +
    
      '{' +
      '  "text": "Conference Dial (Zoom)",  ' +
      '  "href": "tel:+442036950088,,5080555253#",  ' +
      '  "type": "link"  ' +
      '},' +
    '{' +
      ' "text": "Monitor Status", ' +
      ' "href": "https://appp.datadoghq.com/monitors#72563?to_ts=1452282540000&group=host%3Aprod-web-xdb09&from_ts=1452281340000", ' +
      ' "type": "link" ' +
    '},' +
    '{ ' +
    ' "text": "Triggered Monitors", ' +
    '  "href": "https://rpm.newrelic.com/accounts/1218847/incidents/17615637", ' +
    '  "type": "link" ' +
    ' } ' +
    ' ], ' +
  ' "details": { ' +
  ' "body": "Higher than normal Response time on Registration compared to standard baseline and ApDex", ' +
    ' "priority": "normal", ' +
    ' "event_type": "metric_alert_monitor", ' +
    ' "title": "[Critical] Below base line response time detected on the Registration page", ' +
    ' "event_id": "8125363154448140714", ' +
    ' "org": "DiaglogiDevOp", ' +
    ' "tags": "aws-prod, base, env:prod, host:farnsworth, monitor, pd_az:us-west-2c, production, xdb, xtradb", ' +
    ' "user": null ' +
    ' }, ' +
  ' "description": "[Critical] Below base line response time detected on the Registration page" ' +
  '}' 

  console.log(eventObject)


    var settings = {
      "url": "https://events.pagerduty.com/generic/2010-04-15/create_event.json",
      "method": "POST",
      //"data":  eventObject,
      "headers": {
        "Accept": "application/vnd.pagerduty+json;version=2",
        "Authorization": "Token token=V_uHsBDv3G2NxyimTYVg",
      }
    };

    $.ajax(settings).done(function (response) {
      console.log(response);
      $("#responseText").text(JSON.stringify(response));

});





  }
  </script>



<script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

  

    <script  src="js/index.js"></script>




</body>

</html>
